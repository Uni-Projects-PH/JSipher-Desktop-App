import{F as O}from"./Footer-be148390.js";import{d as x,l as F,m as z,n as H,f as c,c as f,a as l,t as p,u as b,F as R,q as D,s as I,j as v,E as d,_ as L,h as _,D as y,V as k,R as g,i as U,v as B,e as C,b as K,r as j}from"./index-49be3c23.js";const q={class:"treeview--package"},J={key:0,class:"treeview--package-children"},Z=x({__name:"TreeViewPackage",props:{package:{}},setup(a){const e=a,s=F(()=>e.package.children.filter(r=>r.type===d.Package).map(r=>r)),t=z("selectPackage");return(r,n)=>{const o=H("TreeViewPackage",!0);return c(),f("div",q,[l("h3",{onClick:n[0]||(n[0]=i=>b(t)(e.package))},p(e.package.name),1),s.value.length>0?(c(),f("div",J,[(c(!0),f(R,null,D(s.value,i=>(c(),I(o,{package:i,key:i.id},null,8,["package"]))),128))])):v("",!0)])}}});const Q=L(Z,[["__scopeId","data-v-3b9703e3"]]),X={class:"treeview"},Y=x({__name:"TreeView",props:{model:{}},setup(a){const e=a,s=F(()=>e.model.elements.filter(t=>t.type===d.Package).map(t=>t));return(t,r)=>(c(),f("div",X,[(c(!0),f(R,null,D(s.value,n=>(c(),I(Q,{package:n,key:n.id},null,8,["package"]))),128))]))}});const G=L(Y,[["__scopeId","data-v-0f31cfd2"]]),w=_([]),N={},h=_(0);let P=0;function W(a){const e={graph:{cells:[],timedCopied:0,dragStartPosition:{}}},s={};return a.forEach(r=>{var n;switch(r.type){case d.Class:const i=ae(r,s);e.graph.cells.push(i),(n=w.value)==null||n.push(i);break}}),$([],e,s,a),console.log(w.value),e}function $(a,e,s,t){t.forEach(r=>{if(r.type===d.Package)$(a,e,s,r.children);else if(r.type===d.Class){const n=r;if(n.relationships.forEach(o=>{const i=se(o);a.includes(i)||(a.push(i),ee(e,o,s))}),n.generalizationClassId){const o=T(n.generalizationClassId,t);o&&te(e,n,o,s)}}}),t.forEach(r=>{if(r.type===d.Package)$(a,e,s,r.children);else if(r.type===d.AssociationClass){const n=r,o=N[n.relationshipId],i={type:"kea.Link",linkType:"dashed",targetMarker:"none",sourceMarker:"none",keaLabels:[],source:{id:s[n.classId],selector:"boundary"},target:{id:o.id,selector:"boundary"},id:m(),z:h.value++,labels:[],attrs:{line:{sourceMarker:{d:"M 20 0 L 10 -8 L 0 0 L 10 8 Z",stroke:"black",fill:"white","stroke-dasharray":"100%","stroke-width":2},targetMarker:{stroke:"black",fill:"white","stroke-dasharray":"100%","stroke-width":2}}}};e.graph.cells.push(i)}})}function ee(a,e,s){var o;const t=s[e.class1.id],r=s[e.class2.id],n={type:"kea.Link",linkType:"solid",targetMarker:S(e.type,!0),sourceMarker:S(e.type,!1),keaLabels:[],source:{id:t,selector:"boundary"},target:{id:r,selector:"boundary"},id:m(),z:h.value++,labels:[],attrs:{line:{sourceMarker:{d:"M 20 0 L 10 -8 L 0 0 L 10 8 Z",stroke:"black",fill:"white","stroke-dasharray":"100%","stroke-width":2},targetMarker:{stroke:"black",fill:"white","stroke-dasharray":"100%","stroke-width":2}}}};N[e.id]=n,(o=w.value)==null||o.forEach(i=>{i.id===t?(n.keaLabels.push({position:"source",value:`${e.class1.name.toLowerCase()}`}),n.labels.push({attrs:{text:{text:`${e.class1.name.toLowerCase()}`}},position:{distance:.9,offset:25,angle:0}})):i.id===r&&(n.keaLabels.push({position:"target",value:`${e.class2.name.toLowerCase()}`}),n.labels.push({attrs:{text:{text:`${e.class2.name.toLowerCase()}`}},position:{distance:.9,offset:25,angle:0}}))}),a.graph.cells.push(n)}function te(a,e,s,t){const r=t[e.id],n=t[s.id],o={type:"kea.Link",linkType:"solid",targetMarker:"arrow_empty",sourceMarker:"none",keaLabels:[],source:{id:r,selector:"boundary"},target:{id:n,selector:"boundary"},id:m(),z:h.value++,labels:[],attrs:{line:{sourceMarker:{d:"M 20 0 L 10 -8 L 0 0 L 10 8 Z",stroke:"black",fill:"white","stroke-dasharray":"100%","stroke-width":2},targetMarker:{stroke:"black",fill:"white","stroke-dasharray":"100%","stroke-width":2}}}};a.graph.cells.push(o)}function ae(a,e){const s={type:"kea.UMLClass",size:{width:200,height:1600},identifier:"Class",name:`${a.name}`,attributes:[],operations:[],minWidth:200,minHeight:160,minHeaderRectHeight:40,minAttributeRectHeight:60,minOperationRectHeight:60,headerRectHeight:40,attributeRectHeight:60,operationRectHeight:60,id:m(),position:{x:1335,y:395},primaryColor:"#F0F0F0",secondaryColor:"#333333",labelColor:"#333333",z:h.value++,attrs:{uml_class_name_rect:{stroke:"#333333"},uml_class_attrs_rect:{stroke:"#333333",fill:"#F0F0F0"},uml_class_operations_rect:{stroke:"#333333",fill:"#F0F0F0"},uml_class_name_text:{text:`<< Class >>
${a.name}`}}};return a.properties.forEach(t=>{s.attributes.push({attributeName:`${t.name}`,attributeType:`${t.type}`,defaultValue:E(t),isStatic:t.isStatic,multiplicity:`${t.multiplicity}`,properties:{isComposite:!1,isDerived:t.isDerived,isDerivedUnion:t.isDerivedUnion,isReadOnly:t.isReadOnly,isStatic:!1,isUnique:!1},visibility:`${M(t.visibility)}`}),s.attrs[`uml_class_attribute_text-${P++}`]={ref:"uml_class_attrs_rect",refY:5,refX:5,fill:"black",textAnchor:"start",textDecoration:"none",text:`${V(t.visibility)} ${t.name} : ${t.type} [${t.multiplicity}] { }`,fontSize:12}}),a.operations.forEach(t=>{s.operations.push({hasProperties:!0,isOrdered:!1,isQuery:t.isQuery,isUnique:!1,operationParameters:t.parameters.map(r=>({parameterName:`${r.name}`,type:`${r.type}`,defaultValue:E(r),multiplicity:`${r.multiplicity}`,properties:{ordered:!1,redefines:!1,readOnly:!1,in:r.direction===y.In,out:r.direction===y.Out,inout:r.direction===y.Inout}})),returnType:"",operationName:`${t.name}`,visibility:`${M(t.visibility)}`}),s.attrs[`uml_class_operation_text-${P++}`]={ref:"uml_class_operations_rect",refY:5,refX:5,fill:"black",textAnchor:"start",textDecoration:"none",text:`${V(t.visibility)} ${t.name}() : Void { }`,fontSize:12}}),e[a.id]=s.id,s}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const e=Math.random()*16|0;return(a==="x"?e:e&3|8).toString(16)})}function V(a){switch(a){case k.Public:return"+";case k.Private:return"-";case k.Protected:return"#";case k.Package:return"~"}}function M(a){switch(a){case k.Public:return"public";case k.Private:return"private";case k.Protected:return"protected";case k.Package:return"package"}}function S(a,e){switch(a){case g.Association:return"none";case g.Aggregation:return e?"none":"diamond_empty";case g.Composition:return e?"arrow":"diamond_filled";case g.NavigableAssociation:return e?"arrow":"none"}return"none"}function se(a){const e=[a.class1.id,a.class2.id].sort();return`${e[0]}-${e[1]}`}function E(a){return a.defaultValue===null?"":a.defaultValue}function T(a,e){for(const s of e)if(s.type===d.Class){if(s.id===a)return s}else if(s.type===d.Package)return T(a,s.children);return null}const re={class:"site-wrapper"},ie={class:"headline-box"},ne={class:"headliner"},oe={class:"sub-headliner"},le={class:"select-title"},ce={class:"diagram-selection"},ue={key:0,class:"selected-pkg-msg"},de={class:"selection-btn-holder"},pe=x({__name:"SelectionView",setup(a){const e=U(),s=_(""),t=_(!1),r=_();function n(i){s.value=i.name,t.value=!0;const u=W(i.children);console.log(u),r.value=JSON.stringify(u)}function o(){const i=document.createElement("a"),u=new Blob([r.value],{type:"text/plain"});i.href=URL.createObjectURL(u),i.download="diagramm_fuer_kea-mod.json",document.body.appendChild(i),i.click(),i.remove()}return B("selectPackage",n),(i,u)=>(c(),f("div",re,[l("div",ie,[l("h1",ne,p(i.$t("lang.headline")),1),l("h2",oe,"- "+p(i.$t("lang.subtitle"))+" -",1)]),l("h2",le,p(i.$t("lang.select-here")),1),l("div",ce,[C(G,{model:b(e).model},null,8,["model"])]),t.value?(c(),f("div",ue,[l("p",null,[K(p(i.$t("lang.selected-pkg-msg"))+" ",1),l("i",null,p(s.value),1)])])):v("",!0),l("div",de,[l("button",{class:"back-btn btn-in-holder",onClick:u[0]||(u[0]=A=>b(j).back())},p(i.$t("lang.back-btn")),1),t.value?(c(),f("button",{key:0,class:"download-btn btn-in-holder",onClick:u[1]||(u[1]=A=>o())},p(i.$t("lang.download-btn")),1)):v("",!0)]),C(O)]))}});const _e=L(pe,[["__scopeId","data-v-72fe607a"]]);export{_e as default};
